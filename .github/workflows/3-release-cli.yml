name: Create Release

on:
  push:
    tags:
      - 'v*'

jobs:
  create-release:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Extract version from tag
      id: version
      run: echo "VERSION=${GITHUB_REF#refs/tags/v}" >> $GITHUB_OUTPUT
    
    - name: Create Release
      uses: actions/create-release@v1
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      with:
        tag_name: ${{ github.ref }}
        release_name: Realms CLI v${{ steps.version.outputs.VERSION }}
        body: |
          ## ğŸ›ï¸ Realms CLI v${{ steps.version.outputs.VERSION }}
          
          A powerful command-line tool for managing Realms project lifecycle.
          
          ### âœ¨ Features
          - **ğŸ—ï¸ Project Scaffolding**: Initialize complete Realms projects
          - **ğŸš€ Automated Deployment**: Deploy backend + frontend + extensions
          - **ğŸ“¦ Extension Management**: Phased rollouts (q1-q4)
          - **âš™ï¸ Post-Deployment Actions**: Automated setup and data population
          - **ğŸ”§ Configuration Validation**: Schema validation with helpful errors
          
          ### ğŸ“¦ Installation
          
          ```bash
          pip install realms-cli
          ```
          
          ### ğŸš€ Quick Start
          
          ```bash
          # Initialize new realm
          realms init --name "My Government Realm" --id my_realm
          
          # Deploy realm
          cd my_realm
          realms deploy --file realm_config.json
          ```
          
          ### ğŸ“‹ Available Commands
          
          - `realms init` - Initialize new Realms project
          - `realms deploy` - Deploy Realms project
          - `realms status` - Check project status
          - `realms validate` - Validate configuration
          - `realms version` - Show version information
          
          ### ğŸ”— Links
          
          - [PyPI Package](https://pypi.org/project/realms-cli/)
          - [Documentation](https://github.com/smartsocialcontracts/realms)
          - [Report Issues](https://github.com/smartsocialcontracts/realms/issues)
          
          ---
          
          **Full Changelog**: https://github.com/smartsocialcontracts/realms/compare/v${{ steps.version.outputs.VERSION }}
        draft: false
        prerelease: false
