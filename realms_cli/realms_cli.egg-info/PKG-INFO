Metadata-Version: 2.4
Name: realms-cli
Version: 0.1.0
Summary: CLI tool for managing Realms project lifecycle
Author-email: Realms Team <team@realms.dev>
License: MIT
Project-URL: Homepage, https://github.com/smartsocialcontracts/realms
Project-URL: Repository, https://github.com/smartsocialcontracts/realms
Project-URL: Documentation, https://docs.realms.dev
Project-URL: Bug Tracker, https://github.com/smartsocialcontracts/realms/issues
Keywords: realms,cli,internet-computer,dfx,blockchain
Classifier: Development Status :: 4 - Beta
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: Programming Language :: Python :: 3.10
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Topic :: System :: Systems Administration
Requires-Python: >=3.8
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: typer[all]>=0.9.0
Requires-Dist: rich>=13.0.0
Requires-Dist: pydantic>=2.0.0
Requires-Dist: jsonschema>=4.0.0
Requires-Dist: jinja2>=3.0.0
Requires-Dist: gitpython>=3.1.0
Requires-Dist: requests>=2.28.0
Requires-Dist: click>=8.0.0
Provides-Extra: dev
Requires-Dist: pytest>=7.0.0; extra == "dev"
Requires-Dist: pytest-cov>=4.0.0; extra == "dev"
Requires-Dist: black>=23.0.0; extra == "dev"
Requires-Dist: isort>=5.12.0; extra == "dev"
Requires-Dist: flake8>=6.0.0; extra == "dev"
Requires-Dist: mypy>=1.0.0; extra == "dev"
Requires-Dist: build>=0.10.0; extra == "dev"
Requires-Dist: twine>=4.0.0; extra == "dev"
Dynamic: license-file

# Realms CLI

A powerful command-line tool for managing the lifecycle of Realms projects - digital government platforms built on the Internet Computer.

## Features

- **üèóÔ∏è Project Scaffolding**: Initialize new Realms projects with `realms init`
- **üöÄ Automated Deployment**: Deploy backend/frontend canisters and extensions with `realms deploy`
- **üì¶ Extension Management**: Support for phased extension deployment
- **‚öôÔ∏è Post-Deployment Actions**: Automated setup and data population
- **üîß Configuration Validation**: Validate realm configurations before deployment
- **üìä Project Status**: Check project health and deployment status

## Installation

### From PyPI (Recommended)

```bash
pip install realms-cli
```

### From Source

```bash
git clone https://github.com/smartsocialcontracts/realms
cd realms/realms_cli
pip install -e .
```

## Prerequisites

- Python 3.8+
- [dfx](https://internetcomputer.org/docs/current/developer-docs/setup/install/) (Internet Computer SDK)
- Node.js 16+
- Git

## Quick Start

### 1. Initialize a New Realm

```bash
realms init --name "My Government Realm" --id my_gov_realm
```

This creates a complete project structure with:
- Backend canister (Python/Kybra)
- Frontend canister (SvelteKit)
- Extension system
- Configuration files
- Deployment scripts

### 2. Deploy Your Realm

```bash
cd my_gov_realm
realms deploy --file realm_config.json
```

Your realm will be available at `http://localhost:8000`

## Commands

### `realms init`

Initialize a new Realms project with scaffolding.

```bash
realms init [OPTIONS]

Options:
  -n, --name TEXT           Realm name
  --id TEXT                 Realm ID (lowercase, underscores)
  --admin TEXT              Admin principal ID
  --network TEXT            Target network [local|staging|ic]
  --interactive/--no-interactive  Interactive mode (default: true)
  -o, --output TEXT         Output directory (default: current)
```

**Example:**
```bash
realms init --name "City Services" --id city_services --admin "2vxsx-fae"
```

### `realms deploy`

Deploy a Realms project based on configuration.

```bash
realms deploy [OPTIONS]

Options:
  -f, --file TEXT           Configuration file (default: realm_config.json)
  -n, --network TEXT        Override network from config
  --skip-extensions         Skip extension deployment
  --skip-post-deployment    Skip post-deployment actions
  --phases TEXT             Deploy specific phases only
  --dry-run                 Show deployment plan without executing
  --identity TEXT           Identity file for authentication
```

**Examples:**
```bash
# Basic deployment
realms deploy

# Deploy to IC mainnet
realms deploy --network ic --identity ~/.config/dfx/identity/production/identity.pem

# Deploy only specific extension phases
realms deploy --phases q1,q2

# Dry run to see what would be deployed
realms deploy --dry-run
```

### `realms status`

Show the current status of your Realms project.

```bash
realms status
```

### `realms validate`

Validate a realm configuration file.

```bash
realms validate [--file realm_config.json]
```

## Configuration

Realms projects are configured via `realm_config.json`:

```json
{
  "realm": {
    "id": "my_government_realm",
    "name": "My Government Realm",
    "description": "A digital government platform",
    "admin_principal": "2vxsx-fae",
    "version": "1.0.0"
  },
  "deployment": {
    "network": "local",
    "clean_deploy": true
  },
  "extensions": {
    "initial": [
      {"name": "public_dashboard", "enabled": true},
      {"name": "citizen_dashboard", "enabled": true}
    ],
    "q1": [
      {"name": "vault_manager", "enabled": true}
    ]
  },
  "post_deployment": {
    "actions": [
      {
        "type": "extension_call",
        "name": "Load demo data",
        "extension_name": "demo_loader",
        "function_name": "load",
        "args": {"step": "base_setup"}
      }
    ]
  }
}
```

### Configuration Schema

- **realm**: Basic realm metadata (id, name, admin, etc.)
- **deployment**: Deployment settings (network, port, identity)
- **extensions**: Extensions organized by deployment phases
- **post_deployment**: Actions to run after deployment

## Extension Phases

Extensions can be organized into deployment phases:

- `initial`: Core extensions deployed first
- `q1`, `q2`, `q3`, `q4`: Quarterly rollout phases
- `phase_1`, `phase_2`, etc.: Custom phases

## Post-Deployment Actions

Automate setup tasks after deployment:

- **extension_call**: Call extension functions
- **script**: Run shell scripts
- **wait**: Add delays between actions

## Development

### Setting up Development Environment

```bash
git clone https://github.com/smartsocialcontracts/realms
cd realms/realms_cli
python -m venv venv
source venv/bin/activate
pip install -e ".[dev]"
```

### Running Tests

```bash
pytest
```

### Code Formatting

```bash
black realms_cli/
isort realms_cli/
```

## Examples

### Government Services Platform

```bash
realms init \
  --name "Digital Government Services" \
  --id gov_services \
  --admin "rdmx6-jaaaa-aaaaa-aaadq-cai"

cd gov_services
realms deploy
```

### Multi-Phase Deployment

```json
{
  "extensions": {
    "initial": [
      {"name": "public_dashboard", "enabled": true}
    ],
    "q1": [
      {"name": "citizen_dashboard", "enabled": true},
      {"name": "notifications", "enabled": true}
    ],
    "q2": [
      {"name": "land_registry", "enabled": true},
      {"name": "justice_litigation", "enabled": true}
    ]
  }
}
```

Deploy phases incrementally:
```bash
realms deploy --phases initial
realms deploy --phases q1
realms deploy --phases q2
```

## Troubleshooting

### Common Issues

**dfx not found**
```bash
# Install dfx
sh -ci "$(curl -fsSL https://internetcomputer.org/install.sh)"
```

**Port already in use**
```bash
# Kill existing dfx processes
dfx stop
pkill dfx
```

**Extension deployment fails**
```bash
# Check extension directory exists
ls extensions/
# Reinstall extensions
./scripts/install_extensions.sh
```

### Getting Help

- Check project status: `realms status`
- Validate configuration: `realms validate`
- Use dry-run mode: `realms deploy --dry-run`

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## License

MIT License - see LICENSE file for details.

## Support

- üìñ [Documentation](https://docs.realms.dev)
- üêõ [Issue Tracker](https://github.com/smartsocialcontracts/realms/issues)
- üí¨ [Discord Community](https://discord.gg/realms)
